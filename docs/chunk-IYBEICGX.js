import{a as De}from"./chunk-LCWNOMSF.js";import{a as lr}from"./chunk-KSGKTOM2.js";import{Ja as be,Ka as ye,Q as w,R as _,Sa as b,Ta as R,Ua as Ce,Wa as Ee,Ya as z,Za as E,ba as q,bb as Ue,cb as Ge,eb as je,gb as $,ib as We,oa as Z,qb as Qe,rb as Me,sa as He,za as qe}from"./chunk-LELRBKKG.js";import{d as Oe}from"./chunk-BIHNL7XX.js";import{a as mr,b as ur}from"./chunk-6UGSP7QS.js";import{a as wr}from"./chunk-2MWJVX7U.js";import{a as hr,c as xr}from"./chunk-BUPRJBLB.js";import{A as Pe,C as fr,D as G,E as gr,F as vr,s as pr}from"./chunk-HN3TUAMP.js";import{$ as ee,A as J,F as dr,L as sr,N as cr,aa as de,f as Ke,g as Ze,i as Je,j as ie,k as Te,l as ne,m as er,n as rr,p as oe,s as ke,t as tr,u as ar,v as ir,w as Le,x as nr,y as U,z as or}from"./chunk-47NYRCQV.js";import{b as i,d as p,e as Se,j as F}from"./chunk-OOCD4CDJ.js";import{a as Be,b as Xe}from"./chunk-6PMQQMX7.js";var se="comm",ce="rule",le="decl";var _r="@import";var br="@namespace",yr="@keyframes";var Cr="@layer";var Ae=Math.abs,re=String.fromCharCode;function me(e){return e.trim()}function te(e,r,t){return e.replace(r,t)}function Er(e,r,t){return e.indexOf(r,t)}function Y(e,r){return e.charCodeAt(r)|0}function B(e,r,t){return e.slice(r,t)}function y(e){return e.length}function Mr(e){return e.length}function j(e,r){return r.push(e),e}var ue=1,W=1,Dr=0,M=0,v=0,K="";function pe(e,r,t,a,n,o,c,d){return{value:e,root:r,parent:t,type:a,props:n,children:o,line:ue,column:W,length:c,return:"",siblings:d}}function Sr(){return v}function Tr(){return v=M>0?Y(K,--M):0,W--,v===10&&(W=1,ue--),v}function D(){return v=M<Dr?Y(K,M++):0,W++,v===10&&(W=1,ue++),v}function V(){return Y(K,M)}function ae(){return M}function fe(e,r){return B(K,e,r)}function Q(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function kr(e){return ue=W=1,Dr=y(K=e),M=0,[]}function Lr(e){return K="",e}function ge(e){return me(fe(M-1,Ie(e===91?e+2:e===40?e+1:e)))}function Pr(e){for(;(v=V())&&v<33;)D();return Q(e)>2||Q(v)>3?"":" "}function Or(e,r){for(;--r&&D()&&!(v<48||v>102||v>57&&v<65||v>70&&v<97););return fe(e,ae()+(r<6&&V()==32&&D()==32))}function Ie(e){for(;D();)switch(v){case e:return M;case 34:case 39:e!==34&&e!==39&&Ie(v);break;case 40:e===41&&Ie(e);break;case 92:D();break}return M}function Ar(e,r){for(;D()&&e+v!==57;)if(e+v===84&&V()===47)break;return"/*"+fe(r,M-1)+"*"+re(e===47?e:D())}function Ir(e){for(;!Q(V());)D();return fe(e,M)}function Fr(e){return Lr(ve("",null,null,null,[""],e=kr(e),0,[0],e))}function ve(e,r,t,a,n,o,c,d,s){for(var f=0,h=0,l=c,x=0,P=0,S=0,u=1,A=1,T=1,g=0,k="",I=n,O=o,C=a,m=k;A;)switch(S=g,g=D()){case 40:if(S!=108&&Y(m,l-1)==58){Er(m+=te(ge(g),"&","&\f"),"&\f",Ae(f?d[f-1]:0))!=-1&&(T=-1);break}case 34:case 39:case 91:m+=ge(g);break;case 9:case 10:case 13:case 32:m+=Pr(S);break;case 92:m+=Or(ae()-1,7);continue;case 47:switch(V()){case 42:case 47:j(It(Ar(D(),ae()),r,t,s),s),(Q(S||1)==5||Q(V()||1)==5)&&y(m)&&B(m,-1,void 0)!==" "&&(m+=" ");break;default:m+="/"}break;case 123*u:d[f++]=y(m)*T;case 125*u:case 59:case 0:switch(g){case 0:case 125:A=0;case 59+h:T==-1&&(m=te(m,/\f/g,"")),P>0&&(y(m)-l||u===0&&S===47)&&j(P>32?zr(m+";",a,t,l-1,s):zr(te(m," ","")+";",a,t,l-2,s),s);break;case 59:m+=";";default:if(j(C=Rr(m,r,t,f,h,n,d,k,I=[],O=[],l,o),o),g===123)if(h===0)ve(m,r,C,C,I,o,l,d,O);else{switch(x){case 99:if(Y(m,3)===110)break;case 108:if(Y(m,2)===97)break;default:h=0;case 100:case 109:case 115:}h?ve(e,C,C,a&&j(Rr(e,C,C,0,0,n,d,k,n,I=[],l,O),O),n,O,l,d,a?I:O):ve(m,C,C,C,[""],O,0,d,O)}}f=h=P=0,u=T=1,k=m="",l=c;break;case 58:l=1+y(m),P=S;default:if(u<1){if(g==123)--u;else if(g==125&&u++==0&&Tr()==125)continue}switch(m+=re(g),g*u){case 38:T=h>0?1:(m+="\f",-1);break;case 44:d[f++]=(y(m)-1)*T,T=1;break;case 64:V()===45&&(m+=ge(D())),x=V(),h=l=y(k=m+=Ir(ae())),g++;break;case 45:S===45&&y(m)==2&&(u=0)}}return o}function Rr(e,r,t,a,n,o,c,d,s,f,h,l){for(var x=n-1,P=n===0?o:[""],S=Mr(P),u=0,A=0,T=0;u<a;++u)for(var g=0,k=B(e,x+1,x=Ae(A=c[u])),I=e;g<S;++g)(I=me(A>0?P[g]+" "+k:te(k,/&\f/g,P[g])))&&(s[T++]=I);return pe(e,r,t,n===0?ce:d,s,f,h,l)}function It(e,r,t,a){return pe(e,r,t,se,re(Sr()),B(e,2,-2),0,a)}function zr(e,r,t,a,n){return pe(e,r,t,le,B(e,0,a),B(e,a+1,-1),a,n)}function he(e,r){for(var t="",a=0;a<e.length;a++)t+=r(e[a],a,e,r)||"";return t}function Vr(e,r,t,a){switch(e.type){case Cr:if(e.children.length)break;case _r:case br:case le:return e.return=e.return||e.value;case se:return"";case yr:return e.return=e.value+"{"+he(e.children,a)+"}";case ce:if(!y(e.value=e.props.join(",")))return""}return y(t=he(e.children,a))?e.return=e.value+"{"+t+"}":""}var Xr="c4",Rt=i(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),zt=i(async()=>{let{diagram:e}=await import("./chunk-L2SHPQKX.js");return{id:Xr,diagram:e}},"loader"),Ft={id:Xr,detector:Rt,loader:zt},Vt=Ft,Hr="flowchart",Nt=i((e,r)=>r?.flowchart?.defaultRenderer==="dagre-wrapper"||r?.flowchart?.defaultRenderer==="elk"?!1:/^\s*graph/.test(e),"detector"),$t=i(async()=>{let{diagram:e}=await import("./chunk-3BMMNGWQ.js");return{id:Hr,diagram:e}},"loader"),Yt={id:Hr,detector:Nt,loader:$t},Bt=Yt,qr="flowchart-v2",Xt=i((e,r)=>r?.flowchart?.defaultRenderer==="dagre-d3"?!1:(r?.flowchart?.defaultRenderer==="elk"&&(r.layout="elk"),/^\s*graph/.test(e)&&r?.flowchart?.defaultRenderer==="dagre-wrapper"?!0:/^\s*flowchart/.test(e)),"detector"),Ht=i(async()=>{let{diagram:e}=await import("./chunk-3BMMNGWQ.js");return{id:qr,diagram:e}},"loader"),qt={id:qr,detector:Xt,loader:Ht},Ut=qt,Ur="er",Gt=i(e=>/^\s*erDiagram/.test(e),"detector"),jt=i(async()=>{let{diagram:e}=await import("./chunk-ARTKQOAB.js");return{id:Ur,diagram:e}},"loader"),Wt={id:Ur,detector:Gt,loader:jt},Qt=Wt,Gr="gitGraph",Kt=i(e=>/^\s*gitGraph/.test(e),"detector"),Zt=i(async()=>{let{diagram:e}=await import("./chunk-G5Q7DQXQ.js");return{id:Gr,diagram:e}},"loader"),Jt={id:Gr,detector:Kt,loader:Zt},ea=Jt,jr="gantt",ra=i(e=>/^\s*gantt/.test(e),"detector"),ta=i(async()=>{let{diagram:e}=await import("./chunk-IYMYEY2V.js");return{id:jr,diagram:e}},"loader"),aa={id:jr,detector:ra,loader:ta},ia=aa,Wr="info",na=i(e=>/^\s*info/.test(e),"detector"),oa=i(async()=>{let{diagram:e}=await import("./chunk-YZADNQ5H.js");return{id:Wr,diagram:e}},"loader"),da={id:Wr,detector:na,loader:oa},Qr="pie",sa=i(e=>/^\s*pie/.test(e),"detector"),ca=i(async()=>{let{diagram:e}=await import("./chunk-FE2BDCQ2.js");return{id:Qr,diagram:e}},"loader"),la={id:Qr,detector:sa,loader:ca},Kr="quadrantChart",ma=i(e=>/^\s*quadrantChart/.test(e),"detector"),ua=i(async()=>{let{diagram:e}=await import("./chunk-Q75JV4XL.js");return{id:Kr,diagram:e}},"loader"),pa={id:Kr,detector:ma,loader:ua},fa=pa,Zr="xychart",ga=i(e=>/^\s*xychart(-beta)?/.test(e),"detector"),va=i(async()=>{let{diagram:e}=await import("./chunk-KM3HROIQ.js");return{id:Zr,diagram:e}},"loader"),ha={id:Zr,detector:ga,loader:va},xa=ha,Jr="requirement",wa=i(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),_a=i(async()=>{let{diagram:e}=await import("./chunk-OJFWIB5H.js");return{id:Jr,diagram:e}},"loader"),ba={id:Jr,detector:wa,loader:_a},ya=ba,et="sequence",Ca=i(e=>/^\s*sequenceDiagram/.test(e),"detector"),Ea=i(async()=>{let{diagram:e}=await import("./chunk-ZVZ7PWFN.js");return{id:et,diagram:e}},"loader"),Ma={id:et,detector:Ca,loader:Ea},Da=Ma,rt="class",Sa=i((e,r)=>r?.class?.defaultRenderer==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e),"detector"),Ta=i(async()=>{let{diagram:e}=await import("./chunk-MGQQZTMS.js");return{id:rt,diagram:e}},"loader"),ka={id:rt,detector:Sa,loader:Ta},La=ka,tt="classDiagram",Pa=i((e,r)=>/^\s*classDiagram/.test(e)&&r?.class?.defaultRenderer==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e),"detector"),Oa=i(async()=>{let{diagram:e}=await import("./chunk-3PBR67EW.js");return{id:tt,diagram:e}},"loader"),Aa={id:tt,detector:Pa,loader:Oa},Ia=Aa,at="state",Ra=i((e,r)=>r?.state?.defaultRenderer==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e),"detector"),za=i(async()=>{let{diagram:e}=await import("./chunk-52NNLKDW.js");return{id:at,diagram:e}},"loader"),Fa={id:at,detector:Ra,loader:za},Va=Fa,it="stateDiagram",Na=i((e,r)=>!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&r?.state?.defaultRenderer==="dagre-wrapper"),"detector"),$a=i(async()=>{let{diagram:e}=await import("./chunk-5PDH4CQ5.js");return{id:it,diagram:e}},"loader"),Ya={id:it,detector:Na,loader:$a},Ba=Ya,nt="journey",Xa=i(e=>/^\s*journey/.test(e),"detector"),Ha=i(async()=>{let{diagram:e}=await import("./chunk-NUUBHDXZ.js");return{id:nt,diagram:e}},"loader"),qa={id:nt,detector:Xa,loader:Ha},Ua=qa,Ga=i((e,r,t)=>{p.debug(`rendering svg for syntax error
`);let a=lr(r),n=a.append("g");a.attr("viewBox","0 0 2412 512"),sr(a,100,512,!0),n.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),n.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),n.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),n.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),n.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),n.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),n.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),n.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${t}`)},"draw"),ot={draw:Ga},ja=ot,Wa={db:{},renderer:ot,parser:{parse:i(()=>{},"parse")}},Qa=Wa,dt="flowchart-elk",Ka=i((e,r={})=>/^\s*flowchart-elk/.test(e)||/^\s*(flowchart|graph)/.test(e)&&r?.flowchart?.defaultRenderer==="elk"?(r.layout="elk",!0):!1,"detector"),Za=i(async()=>{let{diagram:e}=await import("./chunk-3BMMNGWQ.js");return{id:dt,diagram:e}},"loader"),Ja={id:dt,detector:Ka,loader:Za},ei=Ja,st="timeline",ri=i(e=>/^\s*timeline/.test(e),"detector"),ti=i(async()=>{let{diagram:e}=await import("./chunk-E7J4LYGX.js");return{id:st,diagram:e}},"loader"),ai={id:st,detector:ri,loader:ti},ii=ai,ct="mindmap",ni=i(e=>/^\s*mindmap/.test(e),"detector"),oi=i(async()=>{let{diagram:e}=await import("./chunk-AKEMBFC3.js");return{id:ct,diagram:e}},"loader"),di={id:ct,detector:ni,loader:oi},si=di,lt="kanban",ci=i(e=>/^\s*kanban/.test(e),"detector"),li=i(async()=>{let{diagram:e}=await import("./chunk-WQ34FJOE.js");return{id:lt,diagram:e}},"loader"),mi={id:lt,detector:ci,loader:li},ui=mi,mt="sankey",pi=i(e=>/^\s*sankey(-beta)?/.test(e),"detector"),fi=i(async()=>{let{diagram:e}=await import("./chunk-NSTI5WCP.js");return{id:mt,diagram:e}},"loader"),gi={id:mt,detector:pi,loader:fi},vi=gi,ut="packet",hi=i(e=>/^\s*packet(-beta)?/.test(e),"detector"),xi=i(async()=>{let{diagram:e}=await import("./chunk-JE2VSB3C.js");return{id:ut,diagram:e}},"loader"),wi={id:ut,detector:hi,loader:xi},pt="radar",_i=i(e=>/^\s*radar-beta/.test(e),"detector"),bi=i(async()=>{let{diagram:e}=await import("./chunk-WCA4N6UI.js");return{id:pt,diagram:e}},"loader"),yi={id:pt,detector:_i,loader:bi},ft="block",Ci=i(e=>/^\s*block(-beta)?/.test(e),"detector"),Ei=i(async()=>{let{diagram:e}=await import("./chunk-PW3HDEDS.js");return{id:ft,diagram:e}},"loader"),Mi={id:ft,detector:Ci,loader:Ei},Di=Mi,gt="architecture",Si=i(e=>/^\s*architecture/.test(e),"detector"),Ti=i(async()=>{let{diagram:e}=await import("./chunk-UGQPKJCX.js");return{id:gt,diagram:e}},"loader"),ki={id:gt,detector:Si,loader:Ti},Li=ki,vt="treemap",Pi=i(e=>/^\s*treemap/.test(e),"detector"),Oi=i(async()=>{let{diagram:e}=await import("./chunk-UPWZDSF4.js");return{id:vt,diagram:e}},"loader"),Ai={id:vt,detector:Pi,loader:Oi},Nr=!1,we=i(()=>{Nr||(Nr=!0,ee("error",Qa,e=>e.toLowerCase().trim()==="error"),ee("---",{db:{clear:i(()=>{},"clear")},styles:{},renderer:{draw:i(()=>{},"draw")},parser:{parse:i(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:i(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),ne(ei,si,Li),ne(Vt,ui,Ia,La,Qt,ia,da,la,ya,Da,Ut,Bt,ii,ea,Ba,Va,Ua,fa,vi,wi,xa,Di,yi,Ai))},"addDiagrams"),Ii=i(async()=>{p.debug("Loading registered diagrams");let r=(await Promise.allSettled(Object.entries(ie).map(async([t,{detector:a,loader:n}])=>{if(n)try{de(t)}catch{try{let{diagram:o,id:c}=await n();ee(c,o,a)}catch(o){throw p.error(`Failed to load external diagram with key ${t}. Removing from detectors.`),delete ie[t],o}}}))).filter(t=>t.status==="rejected");if(r.length>0){p.error(`Failed to load ${r.length} external diagrams`);for(let t of r)p.error(t);throw new Error(`Failed to load ${r.length} external diagrams`)}},"loadRegisteredDiagrams"),Ri="graphics-document document";function ht(e,r){e.attr("role",Ri),r!==""&&e.attr("aria-roledescription",r)}i(ht,"setA11yDiagramInfo");function xt(e,r,t,a){if(e.insert!==void 0){if(t){let n=`chart-desc-${a}`;e.attr("aria-describedby",n),e.insert("desc",":first-child").attr("id",n).text(t)}if(r){let n=`chart-title-${a}`;e.attr("aria-labelledby",n),e.insert("title",":first-child").attr("id",n).text(r)}}}i(xt,"addSVGa11yTitleDescription");var ze=class wt{constructor(r,t,a,n,o){this.type=r,this.text=t,this.db=a,this.parser=n,this.renderer=o}static{i(this,"Diagram")}static async fromText(r,t={}){let a=U(),n=Te(r,a);r=gr(r)+`
`;try{de(n)}catch{let f=er(n);if(!f)throw new Je(`Diagram ${n} not found.`);let{id:h,diagram:l}=await f();ee(h,l)}let{db:o,parser:c,renderer:d,init:s}=de(n);return c.parser&&(c.parser.yy=o),o.clear?.(),s?.(a),t.title&&o.setDiagramTitle?.(t.title),await c.parse(r),new wt(n,r,o,c,d)}async render(r,t){await this.renderer.draw(this.text,r,t,this)}getParser(){return this.parser}getType(){return this.type}},$r=[],zi=i(()=>{$r.forEach(e=>{e()}),$r=[]},"attachFunctions"),Fi=i(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function _t(e){let r=e.match(Ze);if(!r)return{text:e,metadata:{}};let t=ur(r[1],{schema:mr})??{};t=typeof t=="object"&&!Array.isArray(t)?t:{};let a={};return t.displayMode&&(a.displayMode=t.displayMode.toString()),t.title&&(a.title=t.title.toString()),t.config&&(a.config=t.config),{text:e.slice(r[0].length),metadata:a}}i(_t,"extractFrontMatter");var Vi=i(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(r,t,a)=>"<"+t+a.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),Ni=i(e=>{let{text:r,metadata:t}=_t(e),{displayMode:a,title:n,config:o={}}=t;return a&&(o.gantt||(o.gantt={}),o.gantt.displayMode=a),{title:n,config:o,text:r}},"processFrontmatter"),$i=i(e=>{let r=G.detectInit(e)??{},t=G.detectDirective(e,"wrap");return Array.isArray(t)?r.wrap=t.some(({type:a})=>a==="wrap"):t?.type==="wrap"&&(r.wrap=!0),{text:pr(e),directive:r}},"processDirectives");function Ve(e){let r=Vi(e),t=Ni(r),a=$i(t.text),n=fr(t.config,a.directive);return e=Fi(a.text),{code:e,title:t.title,config:n}}i(Ve,"preprocessDiagram");function bt(e){let r=new TextEncoder().encode(e),t=Array.from(r,a=>String.fromCodePoint(a)).join("");return btoa(t)}i(bt,"toBase64");var Yi=5e4,Bi="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",Xi="sandbox",Hi="loose",qi="http://www.w3.org/2000/svg",Ui="http://www.w3.org/1999/xlink",Gi="http://www.w3.org/1999/xhtml",ji="100%",Wi="100%",Qi="border:0;margin:0;",Ki="margin:0",Zi="allow-top-navigation-by-user-activation allow-popups",Ji='The "iframe" tag is not supported by your browser.',en=["foreignobject"],rn=["dominant-baseline"];function Ne(e){let r=Ve(e);return J(),or(r.config??{}),r}i(Ne,"processAndSetConfigs");async function yt(e,r){we();try{let{code:t,config:a}=Ne(e);return{diagramType:(await Et(t)).type,config:a}}catch(t){if(r?.suppressErrors)return!1;throw t}}i(yt,"parse");var Yr=i((e,r,t=[])=>`
.${e} ${r} { ${t.join(" !important; ")} !important; }`,"cssImportantStyles"),tn=i((e,r=new Map)=>{let t="";if(e.themeCSS!==void 0&&(t+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(t+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(t+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),r instanceof Map){let c=e.htmlLabels??e.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];r.forEach(d=>{Oe(d.styles)||c.forEach(s=>{t+=Yr(d.id,s,d.styles)}),Oe(d.textStyles)||(t+=Yr(d.id,"tspan",(d?.textStyles||[]).map(s=>s.replace("color","fill"))))})}return t},"createCssStyles"),an=i((e,r,t,a)=>{let n=tn(e,t),o=cr(r,n,e.themeVariables);return he(Fr(`${a}{${o}}`),Vr)},"createUserStyles"),nn=i((e="",r,t)=>{let a=e;return!t&&!r&&(a=a.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),a=vr(a),a=a.replace(/<br>/g,"<br/>"),a},"cleanUpSvgCode"),on=i((e="",r)=>{let t=r?.viewBox?.baseVal?.height?r.viewBox.baseVal.height+"px":Wi,a=bt(`<body style="${Ki}">${e}</body>`);return`<iframe style="width:${ji};height:${t};${Qi}" src="data:text/html;charset=UTF-8;base64,${a}" sandbox="${Zi}">
  ${Ji}
</iframe>`},"putIntoIFrame"),Br=i((e,r,t,a,n)=>{let o=e.append("div");o.attr("id",t),a&&o.attr("style",a);let c=o.append("svg").attr("id",r).attr("width","100%").attr("xmlns",qi);return n&&c.attr("xmlns:xlink",n),c.append("g"),e},"appendDivSvgG");function Fe(e,r){return e.append("iframe").attr("id",r).attr("style","width: 100%; height: 100%;").attr("sandbox","")}i(Fe,"sandboxedIframe");var dn=i((e,r,t,a)=>{e.getElementById(r)?.remove(),e.getElementById(t)?.remove(),e.getElementById(a)?.remove()},"removeExistingElements"),sn=i(async function(e,r,t){we();let a=Ne(r);r=a.code;let n=U();p.debug(n),r.length>(n?.maxTextSize??Yi)&&(r=Bi);let o="#"+e,c="i"+e,d="#"+c,s="d"+e,f="#"+s,h=i(()=>{let _e=F(x?d:f).node();_e&&"remove"in _e&&_e.remove()},"removeTempElements"),l=F("body"),x=n.securityLevel===Xi,P=n.securityLevel===Hi,S=n.fontFamily;if(t!==void 0){if(t&&(t.innerHTML=""),x){let L=Fe(F(t),c);l=F(L.nodes()[0].contentDocument.body),l.node().style.margin=0}else l=F(t);Br(l,e,s,`font-family: ${S}`,Ui)}else{if(dn(document,e,s,c),x){let L=Fe(F("body"),c);l=F(L.nodes()[0].contentDocument.body),l.node().style.margin=0}else l=F("body");Br(l,e,s)}let u,A;try{u=await ze.fromText(r,{title:a.title})}catch(L){if(n.suppressErrorRendering)throw h(),L;u=await ze.fromText("error"),A=L}let T=l.select(f).node(),g=u.type,k=T.firstChild,I=k.firstChild,O=u.renderer.getClasses?.(r,u),C=an(n,g,O,o),m=document.createElement("style");m.innerHTML=C,k.insertBefore(m,I);try{await u.renderer.draw(r,e,De.version,u)}catch(L){throw n.suppressErrorRendering?h():ja.draw(r,e,De.version),L}let Pt=l.select(`${f} svg`),Ot=u.db.getAccTitle?.(),At=u.db.getAccDescription?.();Mt(g,Pt,Ot,At),l.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",Gi);let X=l.select(f).node().innerHTML;if(p.debug("config.arrowMarkerAbsolute",n.arrowMarkerAbsolute),X=nn(X,x,dr(n.arrowMarkerAbsolute)),x){let L=l.select(f+" svg").node();X=on(X,L)}else P||(X=Ke.sanitize(X,{ADD_TAGS:en,ADD_ATTR:rn,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(zi(),A)throw A;return h(),{diagramType:g,svg:X,bindFunctions:u.db.bindFunctions}},"render");function Ct(e={}){let r=rr({},e);r?.fontFamily&&!r.themeVariables?.fontFamily&&(r.themeVariables||(r.themeVariables={}),r.themeVariables.fontFamily=r.fontFamily),ar(r),r?.theme&&r.theme in oe?r.themeVariables=oe[r.theme].getThemeVariables(r.themeVariables):r&&(r.themeVariables=oe.default.getThemeVariables(r.themeVariables));let t=typeof r=="object"?tr(r):Le();Se(t.logLevel),we()}i(Ct,"initialize");var Et=i((e,r={})=>{let{code:t}=Ve(e);return ze.fromText(t,r)},"getDiagramFromText");function Mt(e,r,t,a){ht(r,e),xt(r,t,a,r.attr("id"))}i(Mt,"addA11yInfo");var H=Object.freeze({render:sn,parse:yt,getDiagramFromText:Et,initialize:Ct,getConfig:U,setConfig:nr,getSiteConfig:Le,updateSiteConfig:ir,reset:i(()=>{J()},"reset"),globalReset:i(()=>{J(ke)},"globalReset"),defaultConfig:ke});Se(U().logLevel);J(U());var cn=i((e,r,t)=>{p.warn(e),Pe(e)?(t&&t(e.str,e.hash),r.push(Xe(Be({},e),{message:e.str,error:e}))):(t&&t(e),e instanceof Error&&r.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),Dt=i(async function(e={querySelector:".mermaid"}){try{await ln(e)}catch(r){if(Pe(r)&&p.error(r.str),N.parseError&&N.parseError(r),!e.suppressErrors)throw p.error("Use the suppressErrors option to suppress these errors"),r}},"run"),ln=i(async function({postRenderCallback:e,querySelector:r,nodes:t}={querySelector:".mermaid"}){let a=H.getConfig();p.debug(`${e?"":"No "}Callback function found`);let n;if(t)n=t;else if(r)n=document.querySelectorAll(r);else throw new Error("Nodes and querySelector are both undefined");p.debug(`Found ${n.length} diagrams`),a?.startOnLoad!==void 0&&(p.debug("Start On Load: "+a?.startOnLoad),H.updateSiteConfig({startOnLoad:a?.startOnLoad}));let o=new G.InitIDGenerator(a.deterministicIds,a.deterministicIDSeed),c,d=[];for(let s of Array.from(n)){if(p.info("Rendering diagram: "+s.id),s.getAttribute("data-processed"))continue;s.setAttribute("data-processed","true");let f=`mermaid-${o.next()}`;c=s.innerHTML,c=hr(G.entityDecode(c)).trim().replace(/<br\s*\/?>/gi,"<br/>");let h=G.detectInit(c);h&&p.debug("Detected early reinit: ",h);try{let{svg:l,bindFunctions:x}=await Lt(f,c,s);s.innerHTML=l,e&&await e(f),x&&x(s)}catch(l){cn(l,d,N.parseError)}}if(d.length>0)throw d[0]},"runThrowsErrors"),St=i(function(e){H.initialize(e)},"initialize"),mn=i(async function(e,r,t){p.warn("mermaid.init is deprecated. Please use run instead."),e&&St(e);let a={postRenderCallback:t,querySelector:".mermaid"};typeof r=="string"?a.querySelector=r:r&&(r instanceof HTMLElement?a.nodes=[r]:a.nodes=r),await Dt(a)},"init"),un=i(async(e,{lazyLoad:r=!0}={})=>{we(),ne(...e),r===!1&&await Ii()},"registerExternalDiagrams"),Tt=i(function(){if(N.startOnLoad){let{startOnLoad:e}=H.getConfig();e&&N.run().catch(r=>p.error("Mermaid failed to initialize",r))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",Tt,!1);var pn=i(function(e){N.parseError=e},"setParseErrorHandler"),xe=[],Re=!1,kt=i(async()=>{if(!Re){for(Re=!0;xe.length>0;){let e=xe.shift();if(e)try{await e()}catch(r){p.error("Error executing queue",r)}}Re=!1}},"executeQueue"),fn=i(async(e,r)=>new Promise((t,a)=>{let n=i(()=>new Promise((o,c)=>{H.parse(e,r).then(d=>{o(d),t(d)},d=>{p.error("Error parsing",d),N.parseError?.(d),c(d),a(d)})}),"performCall");xe.push(n),kt().catch(a)}),"parse"),Lt=i((e,r,t)=>new Promise((a,n)=>{let o=i(()=>new Promise((c,d)=>{H.render(e,r,t).then(s=>{c(s),a(s)},s=>{p.error("Error parsing",s),N.parseError?.(s),d(s),n(s)})}),"performCall");xe.push(o),kt().catch(n)}),"render"),gn=i(()=>Object.keys(ie).map(e=>({id:e})),"getRegisteredDiagramsMetadata"),N={startOnLoad:!0,mermaidAPI:H,parse:fn,render:Lt,init:mn,run:Dt,registerExternalDiagrams:un,registerLayoutLoaders:wr,initialize:St,parseError:void 0,contentLoaded:Tt,setParseErrorHandler:pn,detectType:Te,registerIconPacks:xr,getRegisteredDiagramsMetadata:gn},$e=N;var vn=["container"],hn=["modalContainer"];function xn(e,r){e&1&&(b(0,"div",3),$(1,"\u8F09\u5165\u5716\u8868\u4E2D..."),R())}function wn(e,r){if(e&1){let t=Ee();b(0,"div",7),z("click",function(n){w(t);let o=E();return _(o.closeModal(n))}),b(1,"div",8),z("click",function(n){return w(t),_(n.stopPropagation())}),b(2,"div",9)(3,"button",10),z("click",function(){w(t);let n=E();return _(n.zoomOut())}),$(4,"\u2796"),R(),b(5,"span",11),$(6),R(),b(7,"button",10),z("click",function(){w(t);let n=E();return _(n.zoomIn())}),$(8,"\u2795"),R(),b(9,"button",10),z("click",function(){w(t);let n=E();return _(n.resetZoom())}),$(10,"\u21BA"),R(),b(11,"button",12),z("click",function(){w(t);let n=E();return _(n.expanded.set(!1))}),$(12,"\u2715"),R()(),b(13,"div",13),z("wheel",function(n){w(t);let o=E();return _(o.onWheel(n))})("mousedown",function(n){w(t);let o=E();return _(o.onPanStart(n))})("mousemove",function(n){w(t);let o=E();return _(o.onPanMove(n))})("mouseup",function(){w(t);let n=E();return _(n.onPanEnd())})("mouseleave",function(){w(t);let n=E();return _(n.onPanEnd())}),b(14,"div",14),Ce(15,"div",15,1),R()()()()}if(e&2){let t=E();Z(6),We("",t.Math.round(t.scale()*100),"%"),Z(8),je("transform","translate("+t.panX()+"px, "+t.panY()+"px) scale("+t.scale()+")")}}var _n=0,Ye=class e{Math=Math;definition=Qe.required();container=Me.required("container");modalContainer=Me("modalContainer");loading=q(!0);expanded=q(!1);scale=q(1);panX=q(0);panY=q(0);isPanning=!1;panStartX=0;panStartY=0;lastPanX=0;lastPanY=0;renderedSvg="";openModal(){this.scale.set(1),this.panX.set(0),this.panY.set(0),this.expanded.set(!0),setTimeout(()=>{let r=this.modalContainer();r&&(r.nativeElement.innerHTML=this.renderedSvg)})}closeModal(r){r.target.classList.contains("modal-overlay")&&this.expanded.set(!1)}zoomIn(){this.scale.update(r=>Math.min(r+.25,5))}zoomOut(){this.scale.update(r=>Math.max(r-.25,.25))}resetZoom(){this.scale.set(1),this.panX.set(0),this.panY.set(0)}onWheel(r){r.preventDefault();let t=r.deltaY>0?-.1:.1;this.scale.update(a=>Math.max(.25,Math.min(5,a+t)))}onPanStart(r){this.isPanning=!0,this.panStartX=r.clientX,this.panStartY=r.clientY,this.lastPanX=this.panX(),this.lastPanY=this.panY()}onPanMove(r){this.isPanning&&(this.panX.set(this.lastPanX+(r.clientX-this.panStartX)),this.panY.set(this.lastPanY+(r.clientY-this.panStartY)))}onPanEnd(){this.isPanning=!1}constructor(){He(async()=>{$e.initialize({startOnLoad:!1,theme:"dark",themeVariables:{darkMode:!0,background:"#161b22",primaryColor:"#1a2a3e",primaryTextColor:"#e0e0e0",primaryBorderColor:"#0e639c",lineColor:"#8b949e",secondaryColor:"#0d2a1a",tertiaryColor:"#2a1a0d",noteBkgColor:"#1a2a3e",noteTextColor:"#c9d1d9",noteBorderColor:"#30363d",actorBkg:"#1a2a3e",actorBorder:"#0e639c",actorTextColor:"#e0e0e0",actorLineColor:"#555",signalColor:"#c9d1d9",signalTextColor:"#c9d1d9",labelBoxBkgColor:"#1a2a3e",labelBoxBorderColor:"#30363d",labelTextColor:"#e0e0e0",loopTextColor:"#8b949e",activationBorderColor:"#4ec9b0",activationBkgColor:"rgba(78, 201, 176, 0.15)",sequenceNumberColor:"#fff",classText:"#e0e0e0"},sequence:{actorMargin:50,mirrorActors:!1,messageMargin:40,boxMargin:10,useMaxWidth:!0},flowchart:{useMaxWidth:!0,htmlLabels:!0,curve:"basis"}});try{let r=`mermaid-graph-${++_n}`,{svg:t}=await $e.render(r,this.definition());this.renderedSvg=t,this.container().nativeElement.innerHTML=t}catch(r){console.error("Mermaid render error:",r),this.container().nativeElement.innerHTML='<p style="color:#e57373">\u26A0\uFE0F \u5716\u8868\u6E32\u67D3\u5931\u6557</p>'}finally{this.loading.set(!1)}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=qe({type:e,selectors:[["app-mermaid-diagram"]],viewQuery:function(t,a){t&1&&Ue(a.container,vn,5)(a.modalContainer,hn,5),t&2&&Ge(2)},inputs:{definition:[1,"definition"]},decls:7,vars:2,consts:[["container",""],["modalContainer",""],[1,"mermaid-wrapper",3,"click"],[1,"mermaid-loading"],[1,"mermaid-container"],[1,"zoom-hint"],[1,"modal-overlay"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-toolbar"],[1,"zoom-btn",3,"click"],[1,"zoom-level"],[1,"close-btn",3,"click"],[1,"modal-diagram",3,"wheel","mousedown","mousemove","mouseup","mouseleave"],[1,"modal-diagram-inner"],[1,"modal-mermaid"]],template:function(t,a){if(t&1){let n=Ee();b(0,"div",2),z("click",function(){return w(n),_(a.openModal())}),be(1,xn,2,0,"div",3),Ce(2,"div",4,0),b(4,"div",5),$(5,"\u{1F50D} \u9EDE\u64CA\u653E\u5927\u67E5\u770B"),R()(),be(6,wn,17,3,"div",6)}t&2&&(Z(),ye(a.loading()?1:-1),Z(5),ye(a.expanded()?6:-1))},styles:[".mermaid-wrapper[_ngcontent-%COMP%]{width:100%;position:relative;cursor:pointer;border-radius:8px;transition:box-shadow .2s}.mermaid-wrapper[_ngcontent-%COMP%]:hover{box-shadow:0 0 0 2px #4ec9b04d}.mermaid-wrapper[_ngcontent-%COMP%]:hover   .zoom-hint[_ngcontent-%COMP%]{opacity:1}.zoom-hint[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:12px;font-size:11px;color:#8b949e;background:#161b22d9;padding:4px 10px;border-radius:4px;opacity:0;transition:opacity .2s;pointer-events:none}.mermaid-loading[_ngcontent-%COMP%]{text-align:center;padding:32px;color:#8b949e;font-size:14px}.mermaid-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;overflow-x:auto;padding:8px 0}.mermaid-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(svg){max-width:100%;height:auto}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:9999;background:#000c;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .15s ease-out}.modal-content[_ngcontent-%COMP%]{width:92vw;height:88vh;background:#0d1117;border:1px solid #30363d;border-radius:12px;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 16px 48px #0009}.modal-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 16px;background:#161b22;border-bottom:1px solid #30363d;flex-shrink:0}.zoom-btn[_ngcontent-%COMP%]{background:#21262d;color:#c9d1d9;border:1px solid #30363d;border-radius:6px;padding:4px 12px;font-size:14px;cursor:pointer;transition:background .15s}.zoom-btn[_ngcontent-%COMP%]:hover{background:#30363d}.zoom-level[_ngcontent-%COMP%]{color:#8b949e;font-size:13px;min-width:48px;text-align:center;font-variant-numeric:tabular-nums}.close-btn[_ngcontent-%COMP%]{margin-left:auto;background:#21262d;color:#f85149;border:1px solid #30363d;border-radius:6px;padding:4px 12px;font-size:16px;cursor:pointer;transition:background .15s}.close-btn[_ngcontent-%COMP%]:hover{background:#3d1214}.modal-diagram[_ngcontent-%COMP%]{flex:1;overflow:hidden;cursor:grab;display:flex;align-items:center;justify-content:center}.modal-diagram[_ngcontent-%COMP%]:active{cursor:grabbing}.modal-diagram-inner[_ngcontent-%COMP%]{transform-origin:center center;transition:transform .08s ease-out;will-change:transform}.modal-mermaid[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:24px}.modal-mermaid[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(svg){max-width:none;height:auto}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}"],changeDetection:0})};export{Ye as a};
