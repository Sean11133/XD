// ==========================================
// Observer Pattern â€” GoF è§€å¯Ÿè€…ä»‹é¢
//
// ğŸ­ è¡Œç‚ºå‹æ¨¡å¼ï¼ˆBehavioral Patternï¼‰
//
// IObserver<T>ï¼šæ¥æ”¶ç«¯ï¼ˆè¨‚é–±è€…ï¼‰ï¼Œè¢«å‹•æ¥æ”¶ Subject å»£æ’­çš„äº‹ä»¶
// ISubject<T>ï¼šç™¼ä½ˆç«¯ï¼ˆç™¼ä½ˆè€…ï¼‰ï¼Œç®¡ç†è§€å¯Ÿè€…ä¸¦ç™¼é€é€šçŸ¥
//
// æ ¸å¿ƒç²¾ç¥ï¼šç™¼ä½ˆç«¯èˆ‡æ¥æ”¶ç«¯å®Œå…¨è§£è€¦ï¼Œ
//          é›™æ–¹å¯ç¨ç«‹é–‹ç™¼ã€ç¨ç«‹æ¸¬è©¦ï¼Œä¸äº’ç›¸å½±éŸ¿é–‹ç™¼é€²ç¨‹ã€‚
// ==========================================

/**
 * Observerï¼ˆè§€å¯Ÿè€… / æ¥æ”¶ç«¯ï¼‰
 * å¯¦ä½œæ­¤ä»‹é¢å³å¯æ¥æ”¶ Subject çš„é€šçŸ¥
 */
export interface IObserver<T> {
  /** æ¥æ”¶äº‹ä»¶é€šçŸ¥ â€” Subject å»£æ’­æ™‚å‘¼å« */
  update(event: T): void;
}

/**
 * Subjectï¼ˆè¢«è§€å¯Ÿè€… / ç™¼ä½ˆç«¯ï¼‰
 * ç®¡ç†ä¸€çµ„ Observerï¼Œç‹€æ…‹è®Šæ›´æ™‚é€šçŸ¥æ‰€æœ‰å·²è¨»å†Šçš„è§€å¯Ÿè€…
 */
export interface ISubject<T> {
  /** è¨»å†Šè§€å¯Ÿè€… */
  attach(observer: IObserver<T>): void;

  /** ç§»é™¤è§€å¯Ÿè€… */
  detach(observer: IObserver<T>): void;

  /** å»£æ’­äº‹ä»¶çµ¦æ‰€æœ‰å·²è¨»å†Šçš„è§€å¯Ÿè€… */
  notify(event: T): void;
}
