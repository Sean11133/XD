<div class="page">
  <h2 class="page-title">ğŸ—ï¸ Class Diagram â€” é¡åˆ¥åœ–</h2>

  <!-- æ¦‚å¿µèªªæ˜ -->
  <section class="concept-section">
    <h3 class="section-title">ğŸ“– ä»€éº¼æ˜¯ Class Diagramï¼Ÿ</h3>
    <div class="info-card">
      <p>
        Class Diagramï¼ˆé¡åˆ¥åœ–ï¼‰æ˜¯ UML ä¸­æœ€æ ¸å¿ƒçš„çµæ§‹åœ–ï¼Œç”¨ä¾†è¡¨é”ç³»çµ±ä¸­<strong>é¡åˆ¥çš„çµæ§‹</strong>
        èˆ‡<strong>é¡åˆ¥ä¹‹é–“çš„é—œä¿‚</strong>ã€‚å®ƒæ˜¯å¾ Use Case åˆ°å¯¦éš›ç¨‹å¼ç¢¼çš„æ©‹æ¨‘ã€‚
      </p>
      <ul>
        <li>âœ… ç†è§£ç³»çµ±çš„çµæ§‹ï¼šç›´è§€å±•ç¤ºé¡åˆ¥çµæ§‹ï¼Œå¹«åŠ©é–‹ç™¼äººå“¡ç†è§£æ•´é«”è¨­è¨ˆ</li>
        <li>âœ… è­˜åˆ¥æ½›åœ¨çš„å•é¡Œï¼šé¡åˆ¥ä¹‹é–“çš„è€¦åˆåº¦ã€è¨­è¨ˆåˆç†æ€§</li>
        <li>âœ… ç”Ÿæˆç¨‹å¼ç¢¼ï¼šä¸€äº›é–‹ç™¼å·¥å…·å¯æ ¹æ“šé¡åˆ¥åœ–è‡ªå‹•ç”Ÿæˆç¨‹å¼ç¢¼</li>
      </ul>
    </div>
  </section>

  <!-- æ ¸å¿ƒå…ƒç´  -->
  <section class="elements-section">
    <h3 class="section-title">ğŸ§± é¡åˆ¥åœ–å…ƒç´ </h3>
    <div class="element-grid">
      <div class="element-card">
        <div class="mini-class-box">
          <div class="mcb-name">ClassName</div>
          <div class="mcb-section">- attribute: Type</div>
          <div class="mcb-section">+ method(): ReturnType</div>
        </div>
        <strong>é¡åˆ¥ (Class)</strong>
        <p>ä¸‰æ ¼çŸ©å½¢ï¼šåç¨±ã€å±¬æ€§ã€æ–¹æ³•</p>
      </div>
      <div class="element-card">
        <div class="relation-visual">
          <div class="rv-box">Parent</div>
          <svg viewBox="0 0 40 40" width="40" height="40">
            <line x1="20" y1="0" x2="20" y2="25" stroke="#4ec9b0" stroke-width="2" />
            <polygon points="12,25 20,40 28,25" fill="none" stroke="#4ec9b0" stroke-width="2" />
          </svg>
          <div class="rv-box">Child</div>
        </div>
        <strong>ç¹¼æ‰¿ (Inheritance)</strong>
        <p>å¯¦ç·š + ç©ºå¿ƒä¸‰è§’å½¢</p>
      </div>
      <div class="element-card">
        <div class="relation-visual">
          <div class="rv-box dashed">Interface</div>
          <svg viewBox="0 0 40 40" width="40" height="40">
            <line
              x1="20"
              y1="0"
              x2="20"
              y2="25"
              stroke="#0e639c"
              stroke-width="2"
              stroke-dasharray="4,3"
            />
            <polygon points="12,25 20,40 28,25" fill="none" stroke="#0e639c" stroke-width="2" />
          </svg>
          <div class="rv-box">Impl</div>
        </div>
        <strong>å¯¦ç¾ (Implementation)</strong>
        <p>è™›ç·š + ç©ºå¿ƒä¸‰è§’å½¢</p>
      </div>
      <div class="element-card">
        <div class="relation-visual horizontal">
          <div class="rv-box small">Whole</div>
          <svg viewBox="0 0 60 20" width="60" height="20">
            <polygon points="0,10 10,4 20,10 10,16" fill="none" stroke="#d18616" stroke-width="2" />
            <line x1="20" y1="10" x2="60" y2="10" stroke="#d18616" stroke-width="2" />
          </svg>
          <div class="rv-box small">Part</div>
        </div>
        <strong>èšåˆ (Aggregation)</strong>
        <p>å¯¦ç·š + ç©ºå¿ƒè±å½¢</p>
      </div>
    </div>
  </section>

  <!-- é¡åˆ¥åœ–ï¼šä¾ Pattern ç¾¤çµ„å±•ç¤º -->
  <section class="diagram-section">
    <h3 class="section-title">ğŸ“Š é›²ç«¯æª”æ¡ˆç®¡ç†ç³»çµ± â€” Class Diagram</h3>

    <!-- Composite Pattern -->
    <div class="pattern-group">
      <div class="pattern-header" (click)="toggleGroup('composite')">
        <span class="toggle-icon">{{ expandedGroup() === 'composite' ? 'â–¼' : 'â–¶' }}</span>
        <span class="pattern-label">Composite Pattern â€” æª”æ¡ˆç³»çµ±çµæ§‹</span>
      </div>
      @if (expandedGroup() === 'composite') {
        <div class="diagram-container">
          <app-mermaid-diagram [definition]="compositeDiagram" />
        </div>

        <div class="pattern-note">
          <strong>ğŸ”‘ Composite Pattern è§’è‰²ï¼š</strong>
          <code>FileSystemNode</code> = Componentï¼ˆæŠ½è±¡åŸºé¡ï¼‰| <code>FileNode</code> = Leaf æŠ½è±¡åŸºé¡
          | <code>WordFile / ImageFile / TextFile</code> = Leaf | <code>Directory</code> =
          Compositeï¼ˆå« childrenï¼‰
        </div>
      }
    </div>

    <!-- Visitor Pattern -->
    <div class="pattern-group">
      <div class="pattern-header" (click)="toggleGroup('visitor')">
        <span class="toggle-icon">{{ expandedGroup() === 'visitor' ? 'â–¼' : 'â–¶' }}</span>
        <span class="pattern-label">Visitor Pattern â€” è¨ªå•è€…</span>
      </div>
      @if (expandedGroup() === 'visitor') {
        <div class="diagram-container">
          <app-mermaid-diagram [definition]="visitorDiagram" />
        </div>

        <div class="pattern-note">
          <strong>ğŸ”‘ Visitor Pattern è§’è‰²ï¼š</strong>
          <code>IVisitor</code> = Visitor ä»‹é¢ï¼ˆå®šç¾© visit æ–¹æ³•ï¼‰| <code>XmlExportVisitor</code> /
          <code>ExtensionSearchVisitor</code> = Concrete Visitor | å„ FileSystemNode çš„
          <code>accept()</code> = Double Dispatch æ©Ÿåˆ¶
        </div>
      }
    </div>

    <!-- Command Pattern -->
    <div class="pattern-group">
      <div class="pattern-header" (click)="toggleGroup('command')">
        <span class="toggle-icon">{{ expandedGroup() === 'command' ? 'â–¼' : 'â–¶' }}</span>
        <span class="pattern-label">Command Pattern â€” å‘½ä»¤</span>
      </div>
      @if (expandedGroup() === 'command') {
        <div class="diagram-container">
          <app-mermaid-diagram [definition]="commandDiagram" />
        </div>

        <div class="pattern-note">
          <strong>ğŸ”‘ Command Pattern è§’è‰²ï¼š</strong>
          <code>ICommand</code> = Command ä»‹é¢ |
          <code>SortCommand / DeleteCommand / TagCommand / RestoreSortCommand</code> = Concrete
          Command | <code>CommandHistory</code> = Invokerï¼ˆç®¡ç† Undo/Redo å †ç–Šï¼‰|
          <code>FileManagerFacade</code> = Clientï¼ˆå»ºç«‹å‘½ä»¤ï¼‰
        </div>
      }
    </div>

    <!-- Strategy Pattern -->
    <div class="pattern-group">
      <div class="pattern-header" (click)="toggleGroup('strategy')">
        <span class="toggle-icon">{{ expandedGroup() === 'strategy' ? 'â–¼' : 'â–¶' }}</span>
        <span class="pattern-label">Strategy Pattern â€” ç­–ç•¥</span>
      </div>
      @if (expandedGroup() === 'strategy') {
        <div class="diagram-container">
          <app-mermaid-diagram [definition]="strategyDiagram" />
        </div>

        <div class="pattern-note">
          <strong>ğŸ”‘ Strategy Pattern è§’è‰²ï¼š</strong>
          <code>ISortStrategy</code> = Strategy ä»‹é¢ | <code>SortByXxxStrategy</code> = Concrete
          Strategy | <code>SortCommand</code> = Contextï¼ˆæŒæœ‰ strategy åƒè€ƒï¼‰
        </div>
      }
    </div>

    <!-- Observer Pattern -->
    <div class="pattern-group">
      <div class="pattern-header" (click)="toggleGroup('observer')">
        <span class="toggle-icon">{{ expandedGroup() === 'observer' ? 'â–¼' : 'â–¶' }}</span>
        <span class="pattern-label">Observer Pattern â€” è§€å¯Ÿè€…</span>
      </div>
      @if (expandedGroup() === 'observer') {
        <div class="diagram-container">
          <app-mermaid-diagram [definition]="observerDiagram" />
        </div>

        <div class="pattern-note">
          <strong>ğŸ”‘ Observer Pattern è§’è‰²ï¼š</strong>
          <code>SearchSubjectService</code> = Subjectï¼ˆè¢«è§€å¯Ÿè€…ï¼Œç”¨ RxJS Subject å¯¦ä½œï¼‰|
          <code>DemoComponent</code> = Observerï¼ˆè§€å¯Ÿè€…ï¼Œsubscribe äº‹ä»¶æµï¼‰|
          <code>SearchEvent</code> = Event Model
        </div>
      }
    </div>
  </section>

  <!-- é—œä¿‚åœ–ä¾‹ -->
  <section class="legend-section">
    <h3 class="section-title">ğŸ“ é—œä¿‚åœ–ä¾‹</h3>
    <div class="legend-grid">
      <div class="legend-item">
        <span class="legend-line solid"></span>
        <span class="legend-arrow">â–·</span>
        <span>é—œè¯ (Association)ï¼šå…©å€‹é¡åˆ¥ä¹‹é–“çš„ç›´æ¥è¯ç¹«</span>
      </div>
      <div class="legend-item">
        <span class="legend-line solid"></span>
        <span class="legend-arrow">â—‡</span>
        <span>èšåˆ (Aggregation)ï¼šæ•´é«”/éƒ¨åˆ†é—œä¿‚ï¼Œéƒ¨åˆ†å¯ç¨ç«‹å­˜åœ¨</span>
      </div>
      <div class="legend-item">
        <span class="legend-line solid"></span>
        <span class="legend-arrow">â–³</span>
        <span>ç¹¼æ‰¿ (Inheritance)ï¼šå­é¡åˆ¥ç¹¼æ‰¿çˆ¶é¡åˆ¥</span>
      </div>
      <div class="legend-item">
        <span class="legend-line dashed"></span>
        <span class="legend-arrow">â–³</span>
        <span>å¯¦ç¾ (Implementation)ï¼šé¡åˆ¥å¯¦ä½œä»‹é¢</span>
      </div>
    </div>
  </section>

  <div class="page-nav">
    <a routerLink="/use-case" class="nav-link">â† Use Case Diagram</a>
    <a routerLink="/collaboration" class="nav-link">ä¸‹ä¸€æ­¥ï¼šCollaboration Diagram â†’</a>
  </div>
</div>
