<div class="page">
  <h2 class="page-title">📋 Use Case Diagram — 使用案例圖</h2>

  <!-- 概念說明 -->
  <section class="concept-section">
    <h3 class="section-title">📖 什麼是 Use Case Diagram？</h3>
    <div class="info-card">
      <p>
        Use Case Diagram（使用案例圖）是 UML 中用來表達<strong>系統功能範圍</strong>的圖形。
        它描述了系統與外部角色（Actor）之間的互動關係，幫助 SA 人員釐清：
      </p>
      <ul>
        <li>✅ 系統需要提供哪些功能（In Scope）</li>
        <li>✅ 誰會使用這些功能（角色）</li>
        <li>✅ 功能之間有什麼相依或擴充關係</li>
      </ul>
      <div class="tip-box">
        <strong>💡 SA 要點：</strong>
        新的系統開發中，Use Case Diagram 是最先產出的設計文件之一，用來與利害關係人確認需求範圍。
      </div>
    </div>
  </section>

  <!-- 核心元素 -->
  <section class="elements-section">
    <h3 class="section-title">🧱 核心元素</h3>
    <div class="element-grid">
      <div class="element-card">
        <div class="element-visual actor-visual">
          <svg viewBox="0 0 40 70" width="40" height="70">
            <circle cx="20" cy="10" r="8" fill="none" stroke="#dcdcaa" stroke-width="2" />
            <line x1="20" y1="18" x2="20" y2="42" stroke="#dcdcaa" stroke-width="2" />
            <line x1="8" y1="28" x2="32" y2="28" stroke="#dcdcaa" stroke-width="2" />
            <line x1="20" y1="42" x2="8" y2="60" stroke="#dcdcaa" stroke-width="2" />
            <line x1="20" y1="42" x2="32" y2="60" stroke="#dcdcaa" stroke-width="2" />
          </svg>
        </div>
        <strong>Actor（角色）</strong>
        <p>與系統互動的使用者或外部系統。主要角色放左邊、次要角色放右邊。</p>
      </div>
      <div class="element-card">
        <div class="element-visual">
          <div class="use-case-oval">Use Case</div>
        </div>
        <strong>Use Case（使用案例）</strong>
        <p>系統提供的一項功能或服務，以橢圓形表示。</p>
      </div>
      <div class="element-card">
        <div class="element-visual">
          <div class="relation-demo">
            <span class="rel-label">&lt;&lt;include&gt;&gt;</span>
            <div class="rel-line dashed"></div>
          </div>
        </div>
        <strong>&lt;&lt;include&gt;&gt;</strong>
        <p>100% 會相依發生的關係。被 include 的 Use Case 是必要步驟。</p>
      </div>
      <div class="element-card">
        <div class="element-visual">
          <div class="relation-demo">
            <span class="rel-label">&lt;&lt;extend&gt;&gt;</span>
            <div class="rel-line dashed extend"></div>
          </div>
        </div>
        <strong>&lt;&lt;extend&gt;&gt;</strong>
        <p>擴充 Use Case，不一定 100% 會接著發生。是可選的額外行為。</p>
      </div>
    </div>
  </section>

  <!-- 本系統的 Use Case Diagram -->
  <section class="diagram-section">
    <h3 class="section-title">📊 雲端檔案管理系統 — Use Case Diagram</h3>
    <div class="diagram-container">
      <app-mermaid-diagram [definition]="useCaseDiagram" />
    </div>
  </section>
  <!-- 對應說明 -->
  <section class="mapping-section">
    <h3 class="section-title">🔗 Use Case → 設計模式 對應</h3>
    <div class="mapping-table">
      <div class="mapping-row header">
        <span>Use Case</span>
        <span>對應設計模式</span>
        <span>說明</span>
      </div>
      <div class="mapping-row">
        <span>瀏覽檔案階層</span>
        <span class="pattern-tag">Composite</span>
        <span>目錄與檔案形成樹狀結構，統一介面遞迴走訪</span>
      </div>
      <div class="mapping-row">
        <span>搜尋檔案</span>
        <span class="pattern-tag">Visitor + Observer</span>
        <span>Visitor 走訪樹結構，Observer 即時通知搜尋進度</span>
      </div>
      <div class="mapping-row">
        <span>排序檔案</span>
        <span class="pattern-tag">Strategy + Command</span>
        <span>Strategy 抽換排序演算法，Command 封裝為可 Undo 操作</span>
      </div>
      <div class="mapping-row">
        <span>刪除檔案</span>
        <span class="pattern-tag">Command</span>
        <span>刪除操作封裝為命令物件，支援撤銷還原</span>
      </div>
      <div class="mapping-row">
        <span>標記檔案</span>
        <span class="pattern-tag">Command</span>
        <span>新增/移除標籤封裝為命令物件</span>
      </div>
      <div class="mapping-row">
        <span>匯出 XML</span>
        <span class="pattern-tag">Visitor</span>
        <span>XmlExportVisitor 走訪樹結構產生 XML 字串</span>
      </div>
      <div class="mapping-row">
        <span>撤銷 / 重做</span>
        <span class="pattern-tag">Command (Invoker)</span>
        <span>CommandHistory 管理 undo/redo 堆疊</span>
      </div>
      <div class="mapping-row">
        <span>建立範例檔案樹</span>
        <span class="pattern-tag">Factory</span>
        <span>FileFactory 封裝檔案節點建構，降低對具體類別的依賴</span>
      </div>
    </div>
  </section>

  <div class="page-nav">
    <a routerLink="/" class="nav-link">← 回首頁</a>
    <a routerLink="/class-diagram" class="nav-link">下一步：Class Diagram →</a>
  </div>
</div>
