<div class="container-dark">
  <header>
    <h1>â˜ï¸ é›²ç«¯æª”æ¡ˆç®¡ç†ç³»çµ± â€” Live Demo</h1>
    <div class="badge">
      Composite + Visitor + Observer + Command + Strategy + Decorator + Adapter + Singleton +
      Flyweight + Mediator
    </div>
  </header>

  <!-- ==========================================
       Command Pattern â€” å·¥å…·åˆ— (Toolbar)
       ========================================== -->
  <app-toolbar
    [commandHistory]="facade.commandHistory"
    [activeSortType]="activeSortType()"
    [activeSortDirection]="activeSortDirection()"
    [hasSelectedNode]="!!selectedNode()"
    [canPaste]="canPaste()"
    [tagCounts]="tagCounts()"
    (sortClicked)="sortBy($event)"
    (deleteClicked)="deleteSelected()"
    (tagClicked)="toggleTag($event)"
    (copyClicked)="copySelected()"
    (pasteClicked)="pasteToSelected()"
    (undoClicked)="undo()"
    (redoClicked)="redo()"
  />

  <div class="layout">
    <!-- ==========================================
         Composite Pattern â€” æ¨¹ç‹€çµæ§‹ç€è¦½å™¨
         ========================================== -->
    <app-tree-view
      [root]="root()"
      [selectedNode]="selectedNode()"
      [treeVersion]="treeVersion()"
      (nodeClicked)="selectNode($event)"
    />

    <div class="panel action-panel">
      <h3 class="panel-title">ğŸ§‘ è¨ªå•è€…æ“ä½œ (Visitor)</h3>

      <div class="controls">
        <button (click)="calculateTotalSize()" class="btn btn-blue">ğŸ“Š è¨ˆç®—å¤§å°</button>

        <div class="export-group">
          <span class="export-label">ğŸ“‘ åŒ¯å‡ºï¼š</span>
          <button (click)="exportByFormat('xml')" class="btn btn-green">XML</button>
          <button (click)="exportByFormat('json')" class="btn btn-green">JSON</button>
          <button (click)="exportByFormat('markdown')" class="btn btn-green">Markdown</button>
        </div>

        <div class="search-group">
          <input
            [ngModel]="searchExt()"
            (ngModelChange)="searchExt.set($event)"
            placeholder="è¼¸å…¥é—œéµå­—..."
            class="input-dark"
          />
          <button (click)="searchFiles()" class="btn btn-orange">æœå°‹ ğŸ”</button>
        </div>
      </div>

      <!-- ==========================================
           Observer Pattern â€” ç›£æ§å€åŸŸ
           Consoleï¼ˆæ—¥èªŒï¼‰+ Dashboardï¼ˆå„€è¡¨æ¿ï¼‰ä¸¦æ’
           ========================================== -->
      <div class="observer-section">
        <div class="observer-main">
          <app-console-output [content]="consoleOutput()" />
        </div>
        <div class="observer-side">
          <app-dashboard-panel [adapter]="dashboardDisplay()" />
        </div>
      </div>
    </div>
  </div>
</div>
